---
import Layout from "../../layouts/Layout.astro";
import data from "../../data/employees.json";

export async function getStaticPaths() {
    return data.values.map((employee) => ({
        params: { id: employee.id.toString() },
        props: { employee },
    }));
}

const { employee } = Astro.props;
---

<Layout>
    <div class="wrapper">
        <div class="portrait">
            <img src={employee.img} alt={employee.name} class="portrait_img" />
        </div>

        <div class="content">
            <div class="heading">
                <div>
                    <h4>{employee.name}</h4>
                    <h6>{employee.title}</h6>
                </div>

                <div class="social-links">
                    {
                        employee.social_links.map((link) => (
                            <a
                                href={link.url}
                                target="_blank"
                                aria-label={link.platform}
                            >
                                <img
                                    src={`/icons/${link.icon}.svg`}
                                    alt={link.platform}
                                />
                            </a>
                        ))
                    }
                </div>
            </div>
            <p class="short">{employee.description}</p>
            <p class="long">{employee.description_long}</p>

            <h5>Past Experience</h5>
            <p>{employee.past_experience}</p>
        </div>
    </div>
</Layout>

<style>
    @layer components {
        .wrapper {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            position: relative;
            width: 100%;
            margin-top: 10rem;
        }

        @media (min-width: 768px) {
            .wrapper {
                flex-direction: row;
                align-items: flex-start;
            }
        }
        @media (max-width: 767px) {
            .content {
                margin: 2rem 2rem 5rem 2rem;
            }
        }

        .portrait {
            flex: 1;
            display: flex;
            justify-content: center;
            position: relative;
        }

        .portrait::after {
            content: "";
            position: absolute;
            top: -1.4rem;
            left: -1.6rem;
            width: 200px;
            height: 150px;
            background: var(--primary-green);
            border-radius: 10px;
            z-index: 1;
        }

        .portrait::before {
            content: "";
            position: absolute;
            top: -4rem;
            left: -6rem;
            width: 330px;
            height: 329px;
            background-image: url("public/icons/pattern.svg");
            background-repeat: repeat;
            opacity: 0.6;
            z-index: 0;
        }

        .portrait_img {
            max-width: 400px;
            border-radius: 1rem;
            position: relative;
            z-index: 2; /* Sørger for at billedet ligger ovenpå pseudo-elementerne */
        }

        .content {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .heading {
            display: flex;
            justify-content: space-between;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links img {
            width: 24px;
            height: 24px;
            transition: transform 0.2s ease;
        }

        .social-links img:hover {
            transform: scale(1.2);
        }
    }

    p {
        line-height: 1.5;
    }
</style>
